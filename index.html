<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NeuroGames - Das Dorf | GitHub Pages</title>
    <meta name="description" content="NeuroGames - Das Dorf - Ein interaktives Browser-Spiel auf GitHub Pages gehostet">
    <meta name="keywords" content="neurogames, dorf, spiel, browser, github pages">
    <meta name="author" content="NeuroGames">
    
    <!-- GitHub Pages optimiert -->
    <link rel="canonical" href="https://IHR-USERNAME.github.io/neurogames-dorf/">
    <meta property="og:title" content="NeuroGames - Das Dorf">
    <meta property="og:description" content="Ein interaktives Browser-Spiel - Von √ºberall spielbar!">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://IHR-USERNAME.github.io/neurogames-dorf/">
    
    <!-- Favicon f√ºr GitHub Pages -->
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üèòÔ∏è</text></svg>">
    
    <style>
        /* GitHub Pages optimierte Styles */
        :root {
            --primary-color: #667eea;
            --secondary-color: #764ba2;
            --accent-color: #f093fb;
            --success-color: #2ecc71;
            --warning-color: #f39c12;
            --danger-color: #e74c3c;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, var(--primary-color) 0%, var(--secondary-color) 100%);
            margin: 0;
            padding: 20px;
            min-height: 100vh;
            animation: backgroundShift 10s ease infinite;
        }
        
        @keyframes backgroundShift {
            0%, 100% { background: linear-gradient(135deg, var(--primary-color) 0%, var(--secondary-color) 100%); }
            50% { background: linear-gradient(135deg, var(--secondary-color) 0%, var(--accent-color) 100%); }
        }
        
        .game-container {
            max-width: 1200px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 25px;
            box-shadow: 0 25px 50px rgba(0,0,0,0.15);
            overflow: hidden;
            animation: containerFloat 6s ease-in-out infinite;
        }
        
        @keyframes containerFloat {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-10px); }
        }
        
        .header {
            background: linear-gradient(45deg, var(--primary-color), var(--secondary-color));
            color: white;
            text-align: center;
            padding: 40px;
            position: relative;
            overflow: hidden;
        }
        
        .header::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: linear-gradient(45deg, transparent, rgba(255,255,255,0.1), transparent);
            animation: shine 4s infinite;
        }
        
        @keyframes shine {
            0% { transform: translateX(-100%) translateY(-100%) rotate(30deg); }
            100% { transform: translateX(100%) translateY(100%) rotate(30deg); }
        }
        
        .header h1 {
            font-size: 32px;
            margin-bottom: 15px;
            position: relative;
            z-index: 1;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }
        
        .header p {
            font-size: 18px;
            opacity: 0.9;
            position: relative;
            z-index: 1;
            font-weight: 300;
        }
        
        .github-info {
            background: linear-gradient(45deg, #333, #24292e);
            color: white;
            padding: 20px;
            text-align: center;
            font-size: 16px;
        }
        
        .github-info a {
            color: #58a6ff;
            text-decoration: none;
            font-weight: bold;
        }
        
        .github-info a:hover {
            text-decoration: underline;
        }
        
        .menu {
            padding: 50px;
            text-align: center;
        }
        
        .menu h2 {
            color: #2c3e50;
            margin-bottom: 40px;
            font-size: 28px;
            font-weight: 300;
        }
        
        .menu-button {
            display: block;
            width: 400px;
            margin: 25px auto;
            padding: 20px;
            font-size: 20px;
            font-weight: 600;
            border: none;
            border-radius: 15px;
            cursor: pointer;
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            position: relative;
            overflow: hidden;
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        
        .menu-button::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            background: rgba(255,255,255,0.2);
            border-radius: 50%;
            transition: all 0.6s ease;
            transform: translate(-50%, -50%);
        }
        
        .menu-button:hover::before {
            width: 400px;
            height: 400px;
        }
        
        .menu-button:hover {
            transform: translateY(-5px) scale(1.05);
            box-shadow: 0 15px 35px rgba(0,0,0,0.2);
        }
        
        .menu-button:active {
            transform: translateY(-2px) scale(1.02);
        }
        
        .menu-btn-1 { 
            background: linear-gradient(45deg, #ff6b6b, #ee5a52); 
            color: white; 
            box-shadow: 0 8px 20px rgba(255, 107, 107, 0.3);
        }
        .menu-btn-2 { 
            background: linear-gradient(45deg, #4ecdc4, #44a08d); 
            color: white; 
            box-shadow: 0 8px 20px rgba(78, 205, 196, 0.3);
        }
        .menu-btn-magisch { 
            background: linear-gradient(45deg, #667eea, #764ba2, #f093fb); 
            color: white; 
            box-shadow: 0 8px 20px rgba(102, 126, 234, 0.4);
            position: relative;
            overflow: hidden;
        }
        .menu-btn-magisch::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: linear-gradient(45deg, transparent, rgba(255,255,255,0.2), transparent);
            animation: magicShimmer 3s infinite;
            z-index: 1;
        }
        @keyframes magicShimmer {
            0% { transform: translateX(-100%) translateY(-100%) rotate(30deg); }
            100% { transform: translateX(100%) translateY(100%) rotate(30deg); }
        }
        .menu-btn-3 { 
            background: linear-gradient(45deg, #45b7d1, #96c93d); 
            color: white; 
            box-shadow: 0 8px 20px rgba(69, 183, 209, 0.3);
        }
        .menu-btn-4 { 
            background: linear-gradient(45deg, #f093fb, #f5576c); 
            color: white; 
            box-shadow: 0 8px 20px rgba(240, 147, 251, 0.3);
        }
        .menu-btn-5 { 
            background: linear-gradient(45deg, #ffeaa7, #fab1a0); 
            color: #2c3e50; 
            box-shadow: 0 8px 20px rgba(255, 234, 167, 0.3);
        }
        
        .dorf-container {
            display: none;
            padding: 40px;
            text-align: center;
        }
        
        .dorf-title {
            font-size: 36px;
            color: #2c3e50;
            margin-bottom: 40px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.1);
            animation: titlePulse 3s ease-in-out infinite;
        }
        
        @keyframes titlePulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }
        
        .bild-mit-buttons {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 40px;
            margin: 40px 0;
            flex-wrap: wrap;
        }
        
        .dorf-bild {
            max-width: 700px;
            max-height: 500px;
            border: 5px solid #34495e;
            border-radius: 20px;
            box-shadow: 0 15px 40px rgba(0,0,0,0.3);
            transition: all 0.4s ease;
            animation: imageFloat 4s ease-in-out infinite;
        }
        
        @keyframes imageFloat {
            0%, 100% { transform: translateY(0px) rotate(0deg); }
            50% { transform: translateY(-5px) rotate(1deg); }
        }
        
        .dorf-bild:hover {
            transform: scale(1.03) rotate(2deg);
            box-shadow: 0 20px 50px rgba(0,0,0,0.4);
        }
        
        .richtung-button {
            padding: 30px 40px;
            font-size: 24px;
            font-weight: bold;
            border: none;
            border-radius: 20px;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            min-width: 160px;
            position: relative;
            overflow: hidden;
            text-transform: uppercase;
            letter-spacing: 2px;
        }
        
        .richtung-button::after {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            background: rgba(255,255,255,0.3);
            border-radius: 50%;
            transition: all 0.5s ease;
            transform: translate(-50%, -50%);
        }
        
        .richtung-button:hover::after {
            width: 300px;
            height: 300px;
        }
        
        .links-button {
            background: linear-gradient(45deg, #3498db, #2980b9);
            color: white;
            box-shadow: 0 10px 25px rgba(52, 152, 219, 0.4);
        }
        
        .rechts-button {
            background: linear-gradient(45deg, #2ecc71, #27ae60);
            color: white;
            box-shadow: 0 10px 25px rgba(46, 204, 113, 0.4);
        }
        
        .richtung-button:hover {
            transform: scale(1.15) rotate(5deg);
            box-shadow: 0 15px 35px rgba(0,0,0,0.4);
        }
        
        .info-text {
            margin: 40px 0;
            font-size: 20px;
            color: #7f8c8d;
            font-style: italic;
            animation: textGlow 2s ease-in-out infinite alternate;
        }
        
        @keyframes textGlow {
            from { text-shadow: 0 0 5px rgba(127, 140, 141, 0.5); }
            to { text-shadow: 0 0 20px rgba(127, 140, 141, 0.8); }
        }
        
        .zurueck-button {
            background: linear-gradient(45deg, var(--danger-color), #c0392b);
            color: white;
            padding: 18px 50px;
            border: none;
            border-radius: 15px;
            font-size: 20px;
            font-weight: bold;
            cursor: pointer;
            margin-top: 40px;
            transition: all 0.3s ease;
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        
        .zurueck-button:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 25px rgba(231, 76, 60, 0.4);
        }
        
        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.8);
            animation: modalFadeIn 0.4s ease;
        }
        
        @keyframes modalFadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        .modal-content {
            background: linear-gradient(135deg, var(--primary-color) 0%, var(--secondary-color) 100%);
            color: white;
            margin: 8% auto;
            padding: 50px;
            border-radius: 25px;
            width: 90%;
            max-width: 700px;
            text-align: center;
            box-shadow: 0 25px 50px rgba(0,0,0,0.5);
            animation: modalSlideIn 0.6s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }
        
        @keyframes modalSlideIn {
            from { transform: translateY(-100px) scale(0.8); opacity: 0; }
            to { transform: translateY(0) scale(1); opacity: 1; }
        }
        
        .modal-title {
            font-size: 32px;
            margin-bottom: 25px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }
        
        .modal-text {
            font-size: 20px;
            line-height: 1.8;
            margin-bottom: 35px;
            white-space: pre-line;
        }
        
        .modal-button {
            background: rgba(255,255,255,0.2);
            color: white;
            padding: 18px 40px;
            border: 3px solid white;
            border-radius: 15px;
            font-size: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
            text-transform: uppercase;
            letter-spacing: 1px;
            font-weight: bold;
        }
        
        .modal-button:hover {
            background: white;
            color: var(--primary-color);
            transform: scale(1.1);
        }
        
        .footer {
            background: #2c3e50;
            color: white;
            text-align: center;
            padding: 30px;
            font-size: 16px;
        }
        
        .footer a {
            color: #58a6ff;
            text-decoration: none;
        }
        
        .footer a:hover {
            text-decoration: underline;
        }
        
        /* Video Modal Styles */
        .video-modal {
            display: none;
            position: fixed;
            z-index: 2000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.95);
            animation: videoModalFadeIn 0.5s ease;
        }
        
        @keyframes videoModalFadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        .video-content {
            position: relative;
            margin: 5% auto;
            width: 90%;
            max-width: 1000px;
            text-align: center;
        }
        
        .video-player {
            width: 100%;
            max-height: 70vh;
            border-radius: 15px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.5);
            animation: videoSlideIn 0.8s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }
        
        @keyframes videoSlideIn {
            from { transform: translateY(-50px) scale(0.9); opacity: 0; }
            to { transform: translateY(0) scale(1); opacity: 1; }
        }
        
        .video-controls {
            margin-top: 30px;
            display: flex;
            justify-content: center;
            gap: 20px;
            flex-wrap: wrap;
        }
        
        .video-button {
            background: linear-gradient(45deg, var(--primary-color), var(--secondary-color));
            color: white;
            padding: 15px 30px;
            border: none;
            border-radius: 10px;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        
        .video-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(0,0,0,0.3);
        }
        
        .video-button.close {
            background: linear-gradient(45deg, var(--danger-color), #c0392b);
        }
        
        .video-button.fullscreen {
            background: linear-gradient(45deg, var(--success-color), #27ae60);
        }
        
        .video-title {
            color: white;
            font-size: 28px;
            margin-bottom: 20px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.5);
        }
        
        .video-description {
            color: rgba(255,255,255,0.8);
            font-size: 16px;
            margin-bottom: 20px;
            line-height: 1.6;
        }
        
        /* Spiel-Men√º Modal Styles */
        .spiel-menu-modal {
            display: none;
            position: fixed;
            z-index: 1500;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.9);
            animation: modalFadeIn 0.3s ease;
        }
        
        .spiel-menu-content {
            position: relative;
            margin: 5% auto;
            width: 90%;
            max-width: 600px;
            background: linear-gradient(135deg, var(--container-bg), #2a2a2a);
            padding: 40px;
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.5);
            text-align: center;
        }
        
        .spiel-menu-title {
            color: var(--primary-color);
            font-size: 32px;
            margin-bottom: 30px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }
        
        .spiel-buttons {
            display: flex;
            flex-direction: column;
            gap: 15px;
            margin-bottom: 30px;
        }
        
        .spiel-button {
            background: linear-gradient(45deg, var(--primary-color), var(--secondary-color));
            color: white;
            padding: 18px 30px;
            border: none;
            border-radius: 12px;
            font-size: 18px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        
        .spiel-button:hover {
            transform: translateY(-3px);
            box-shadow: 0 15px 30px rgba(0,0,0,0.3);
            background: linear-gradient(45deg, var(--secondary-color), var(--primary-color));
        }
        
        .spiel-button.erd-addition {
            background: linear-gradient(45deg, #8B4513, #CD853F);
        }
        
        .spiel-button.erd-addition:hover {
            background: linear-gradient(45deg, #CD853F, #DEB887);
        }
        
        .spiel-button.naechstes-level {
            background: linear-gradient(45deg, #FF6B35, #F7931E);
            border: 2px solid #FF4500;
        }
        
        .spiel-button.naechstes-level:hover {
            background: linear-gradient(45deg, #FF8C42, #FFB347);
            transform: translateY(-3px);
            box-shadow: 0 15px 30px rgba(255, 107, 53, 0.4);
        }
        
        /* Erd-Addition Spiel Styles */
        .erd-addition-modal {
            display: none;
            position: fixed;
            z-index: 2000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.95);
        }
        
        .erd-addition-content {
            position: relative;
            margin: 3% auto;
            width: 90%;
            max-width: 800px;
            background: linear-gradient(135deg, #2F1B14, #4A2C2A);
            padding: 40px;
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(139, 69, 19, 0.3);
            text-align: center;
            border: 3px solid #8B4513;
        }
        
        .erd-title {
            color: #DEB887;
            font-size: 36px;
            margin-bottom: 20px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.5);
        }
        
        .erd-level {
            color: #CD853F;
            font-size: 24px;
            margin-bottom: 30px;
        }
        
        .brocken-container {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 30px;
            margin: 40px 0;
            flex-wrap: wrap;
        }
        
        .brocken {
            background: linear-gradient(45deg, #8B4513, #A0522D);
            color: #FFFFFF;
            font-size: 48px;
            font-weight: bold;
            width: 120px;
            height: 120px;
            border-radius: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 10px 20px rgba(0,0,0,0.3);
            border: 3px solid #CD853F;
            animation: brockenPulse 2s infinite;
        }
        
        @keyframes brockenPulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }
        
        .plus-zeichen {
            font-size: 48px;
            color: #DEB887;
            font-weight: bold;
        }
        
        .eingabe-container {
            margin: 40px 0;
        }
        
        .erd-input {
            background: rgba(222, 184, 135, 0.1);
            border: 3px solid #8B4513;
            border-radius: 15px;
            padding: 20px;
            font-size: 24px;
            color: #DEB887;
            text-align: center;
            width: 200px;
            margin: 0 20px;
        }
        
        .erd-input:focus {
            outline: none;
            border-color: #CD853F;
            background: rgba(222, 184, 135, 0.2);
        }
        
        .erd-submit {
            background: linear-gradient(45deg, #228B22, #32CD32);
            color: white;
            padding: 20px 40px;
            border: none;
            border-radius: 15px;
            font-size: 20px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-left: 20px;
        }
        
        .erd-submit:hover {
            background: linear-gradient(45deg, #32CD32, #7FFF00);
            transform: translateY(-2px);
        }
        
        .erd-result {
            margin-top: 30px;
            font-size: 24px;
            font-weight: bold;
            min-height: 60px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .erd-success {
            color: #32CD32;
            animation: successPulse 0.6s ease-in-out;
        }
        
        @keyframes successPulse {
            0% { transform: scale(1); }
            25% { transform: scale(1.1) rotateZ(2deg); }
            50% { transform: scale(1.2) rotateZ(-2deg); }
            75% { transform: scale(1.1) rotateZ(1deg); }
            100% { transform: scale(1); }
        }
        
        .brocken-success {
            animation: brockenExplode 0.8s ease-out;
        }
        
        @keyframes brockenExplode {
            0% { transform: scale(1); background: linear-gradient(45deg, #8B4513, #A0522D); }
            25% { transform: scale(1.2); background: linear-gradient(45deg, #FFD700, #FFA500); box-shadow: 0 0 30px #FFD700; }
            50% { transform: scale(1.3); background: linear-gradient(45deg, #32CD32, #7FFF00); box-shadow: 0 0 40px #32CD32; }
            75% { transform: scale(1.1); background: linear-gradient(45deg, #32CD32, #7FFF00); }
            100% { transform: scale(1); background: linear-gradient(45deg, #8B4513, #A0522D); box-shadow: 0 10px 20px rgba(0,0,0,0.3); }
        }
        
        .score-anzeige {
            position: absolute;
            top: 80px;
            right: 20px;
            background: linear-gradient(45deg, #FFD700, #FFA500);
            color: #000;
            padding: 15px 20px;
            border-radius: 15px;
            font-size: 20px;
            font-weight: bold;
            border: 3px solid #FFD700;
            box-shadow: 0 10px 25px rgba(255, 215, 0, 0.3);
            animation: scoreGlow 2s infinite alternate;
        }
        
        @keyframes scoreGlow {
            0% { box-shadow: 0 10px 25px rgba(255, 215, 0, 0.3); }
            100% { box-shadow: 0 15px 35px rgba(255, 215, 0, 0.6); }
        }
        
        .erd-error {
            color: #FF4500;
        }
        
        /* Login Modal */
        .login-modal {
            display: none;
            position: fixed;
            z-index: 2200;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.95);
        }
        
        .login-content {
            position: relative;
            margin: 15% auto;
            width: 90%;
            max-width: 400px;
            background: linear-gradient(135deg, #1a1a1a, #2a2a2a);
            padding: 40px;
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.5);
            text-align: center;
            border: 3px solid #4169E1;
        }
        
        .login-title {
            color: #4169E1;
            font-size: 28px;
            margin-bottom: 30px;
        }
        
        .login-input {
            background: rgba(65, 105, 225, 0.1);
            border: 2px solid #4169E1;
            border-radius: 10px;
            padding: 15px;
            font-size: 18px;
            color: #fff;
            width: 100%;
            margin-bottom: 20px;
        }
        
        .login-input:focus {
            outline: none;
            border-color: #6495ED;
            background: rgba(65, 105, 225, 0.2);
        }
        
        .login-button {
            background: linear-gradient(45deg, #4169E1, #6495ED);
            color: white;
            padding: 15px 30px;
            border: none;
            border-radius: 10px;
            font-size: 18px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            margin: 10px;
        }
        
        .login-button:hover {
            background: linear-gradient(45deg, #6495ED, #87CEEB);
            transform: translateY(-2px);
        }
        
        .user-info {
            display: none;
            background: rgba(65, 105, 225, 0.2);
            padding: 15px;
            border-radius: 10px;
            margin: 20px;
            border: 2px solid #4169E1;
        }
        
        .current-user {
            color: #6495ED;
            font-size: 18px;
            font-weight: bold;
        }
        
        /* Login Tabs */
        .login-tabs {
            display: flex;
            margin-bottom: 20px;
            border-radius: 10px;
            overflow: hidden;
            border: 2px solid #4169E1;
        }
        
        .login-tab {
            flex: 1;
            background: rgba(65, 105, 225, 0.1);
            color: #87CEEB;
            padding: 12px 20px;
            border: none;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .login-tab.active {
            background: linear-gradient(45deg, #4169E1, #6495ED);
            color: white;
        }
        
        .login-tab:hover:not(.active) {
            background: rgba(65, 105, 225, 0.2);
        }
        
        .login-form {
            animation: fadeIn 0.3s ease;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .existing-accounts {
            margin: 15px 0;
            text-align: left;
        }
        
        .account-item {
            background: rgba(65, 105, 225, 0.1);
            border: 1px solid #4169E1;
            border-radius: 8px;
            padding: 10px 15px;
            margin: 5px 0;
            cursor: pointer;
            transition: all 0.3s ease;
            color: #87CEEB;
        }
        
        .account-item:hover {
            background: rgba(65, 105, 225, 0.2);
            border-color: #6495ED;
            transform: translateX(5px);
        }
        
        .account-item .account-name {
            font-weight: bold;
            color: #fff;
        }
        
        .account-item .account-stats {
            font-size: 12px;
            color: #999;
            margin-top: 3px;
        }
        
        /* Magische Karte */
        .magische-karte-modal {
            display: none;
            position: fixed;
            z-index: 2500;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #0f0f23, #1a1a3a);
            backdrop-filter: blur(10px);
        }
        
        .karte-container {
            position: relative;
            width: 95%;
            height: 95%;
            margin: 2.5% auto;
            background: linear-gradient(135deg, #1a1a2e, #16213e, #0f3460);
            border-radius: 20px;
            box-shadow: 0 25px 50px rgba(0, 0, 0, 0.5);
            border: 3px solid;
            border-image: linear-gradient(45deg, #667eea, #764ba2, #f093fb) 1;
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }
        
        .karte-header {
            background: linear-gradient(90deg, #667eea, #764ba2);
            padding: 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
        }
        
        .karte-title {
            color: white;
            font-size: 28px;
            margin: 0;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
        }
        
        .karte-controls {
            display: flex;
            gap: 10px;
        }
        
        .karte-button {
            background: rgba(255, 255, 255, 0.2);
            color: white;
            border: 2px solid rgba(255, 255, 255, 0.3);
            padding: 10px 20px;
            border-radius: 10px;
            font-size: 14px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            backdrop-filter: blur(5px);
        }
        
        .karte-button:hover {
            background: rgba(255, 255, 255, 0.3);
            border-color: rgba(255, 255, 255, 0.5);
            transform: translateY(-2px);
        }
        
        .karte-content {
            flex: 1;
            display: flex;
            gap: 20px;
            padding: 20px;
            overflow: hidden;
        }
        
        .karte-bereich {
            flex: 2;
            position: relative;
        }
        
        .magische-karte {
            width: 100%;
            height: 100%;
            position: relative;
            background: radial-gradient(circle at 30% 20%, #2a2a5a, #1a1a3a);
            border-radius: 15px;
            border: 2px solid #667eea;
            overflow: hidden;
            box-shadow: inset 0 0 50px rgba(102, 126, 234, 0.3);
        }
        
        .karte-hintergrund {
            position: absolute;
            width: 100%;
            height: 100%;
            background: 
                radial-gradient(circle at 20% 80%, rgba(255, 215, 0, 0.1) 0%, transparent 50%),
                radial-gradient(circle at 80% 20%, rgba(102, 126, 234, 0.15) 0%, transparent 50%),
                radial-gradient(circle at 40% 40%, rgba(240, 147, 251, 0.1) 0%, transparent 50%);
            animation: magicBackground 8s ease-in-out infinite;
        }
        
        @keyframes magicBackground {
            0%, 100% { 
                background: 
                    radial-gradient(circle at 20% 80%, rgba(255, 215, 0, 0.1) 0%, transparent 50%),
                    radial-gradient(circle at 80% 20%, rgba(102, 126, 234, 0.15) 0%, transparent 50%);
            }
            50% { 
                background: 
                    radial-gradient(circle at 80% 20%, rgba(255, 215, 0, 0.15) 0%, transparent 50%),
                    radial-gradient(circle at 20% 80%, rgba(102, 126, 234, 0.1) 0%, transparent 50%);
            }
        }
        
        .karten-aktivitaeten {
            position: absolute;
            width: 100%;
            height: 100%;
            z-index: 10;
        }
        
        .aktivitaet-punkt {
            position: absolute;
            width: 12px;
            height: 12px;
            border-radius: 50%;
            border: 2px solid white;
            cursor: pointer;
            transition: all 0.3s ease;
            animation: aktivitaetPuls 2s ease-in-out infinite;
            box-shadow: 0 0 10px currentColor;
        }
        
        .aktivitaet-punkt:hover {
            transform: scale(1.5);
            z-index: 100;
        }
        
        @keyframes aktivitaetPuls {
            0%, 100% { opacity: 0.8; transform: scale(1); }
            50% { opacity: 1; transform: scale(1.2); }
        }
        
        .aktivitaet-tooltip {
            position: absolute;
            background: rgba(0, 0, 0, 0.9);
            color: white;
            padding: 8px 12px;
            border-radius: 8px;
            font-size: 12px;
            white-space: nowrap;
            z-index: 1000;
            border: 1px solid #667eea;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.5);
            pointer-events: none;
        }
        
        .karte-legende {
            position: absolute;
            top: 20px;
            right: 20px;
            background: rgba(0, 0, 0, 0.7);
            padding: 15px;
            border-radius: 10px;
            border: 1px solid #667eea;
            backdrop-filter: blur(5px);
        }
        
        .karte-legende h4 {
            color: #667eea;
            margin: 0 0 10px 0;
            font-size: 14px;
        }
        
        .legende-item {
            display: flex;
            align-items: center;
            margin: 5px 0;
            font-size: 12px;
            color: #ccc;
        }
        
        .legende-farbe {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            margin-right: 8px;
            border: 1px solid white;
        }
        
        .timeline-panel {
            flex: 1;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 15px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            display: flex;
            flex-direction: column;
            backdrop-filter: blur(10px);
        }
        
        .timeline-header {
            padding: 15px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .timeline-header h3 {
            color: #667eea;
            margin: 0;
            font-size: 18px;
        }
        
        .timeline-filter select {
            background: rgba(102, 126, 234, 0.2);
            color: white;
            border: 1px solid #667eea;
            border-radius: 5px;
            padding: 5px 10px;
            font-size: 12px;
        }
        
        .timeline-content {
            flex: 1;
            overflow-y: auto;
            padding: 15px;
            scrollbar-width: thin;
            scrollbar-color: #667eea transparent;
        }
        
        .timeline-content::-webkit-scrollbar {
            width: 6px;
        }
        
        .timeline-content::-webkit-scrollbar-track {
            background: transparent;
        }
        
        .timeline-content::-webkit-scrollbar-thumb {
            background: #667eea;
            border-radius: 3px;
        }
        
        .timeline-event {
            background: rgba(255, 255, 255, 0.05);
            border-left: 3px solid #667eea;
            margin: 10px 0;
            padding: 12px;
            border-radius: 8px;
            transition: all 0.3s ease;
        }
        
        .timeline-event:hover {
            background: rgba(255, 255, 255, 0.1);
            transform: translateX(5px);
        }
        
        .timeline-event.game {
            border-left-color: #4169E1;
        }
        
        .timeline-event.login {
            border-left-color: #32CD32;
        }
        
        .timeline-event.achievement {
            border-left-color: #FFD700;
        }
        
        .event-titel {
            color: white;
            font-weight: bold;
            font-size: 14px;
            margin-bottom: 5px;
        }
        
        .event-beschreibung {
            color: #ccc;
            font-size: 12px;
            margin-bottom: 5px;
        }
        
        .event-zeit {
            color: #888;
            font-size: 11px;
        }
        
        .karte-stats {
            display: flex;
            justify-content: space-around;
            padding: 20px;
            background: rgba(255, 255, 255, 0.05);
        }
        
        .stat-box {
            text-align: center;
            padding: 15px;
            background: rgba(102, 126, 234, 0.1);
            border-radius: 10px;
            border: 1px solid rgba(102, 126, 234, 0.3);
            min-width: 80px;
        }
        
        .stat-zahl {
            color: #667eea;
            font-size: 24px;
            font-weight: bold;
            margin-bottom: 5px;
        }
        
        .stat-label {
            color: #ccc;
            font-size: 12px;
        }

        /* Spielstatistiken */
        .spiel-listen-container {
            display: flex;
            flex-direction: column;
            gap: 30px;
            margin: 30px 0;
        }
        
        .spiel-liste {
            background: rgba(139, 69, 19, 0.1);
            padding: 20px;
            border-radius: 15px;
            border: 2px solid #8B4513;
        }
        
        .liste-titel {
            color: #CD853F;
            font-size: 20px;
            font-weight: bold;
            margin-bottom: 15px;
            text-align: center;
        }
        
        .spiel-eintrag {
            display: grid;
            grid-template-columns: 1fr 80px 60px 80px 80px;
            gap: 10px;
            background: rgba(139, 69, 19, 0.2);
            padding: 12px;
            border-radius: 8px;
            margin-bottom: 8px;
            align-items: center;
            border: 1px solid #8B4513;
            font-size: 14px;
        }
        
        .spiel-datum {
            color: #DEB887;
            font-size: 12px;
        }
        
        .spiel-score {
            color: #FFD700;
            font-weight: bold;
        }
        
        .spiel-antworten {
            color: #32CD32;
            font-weight: bold;
        }
        
        .spiel-zeit {
            color: #87CEEB;
            font-weight: bold;
        }
        
        .spiel-settings {
            color: #DEB887;
            font-size: 11px;
        }
        
        .benutzer-stats {
            background: rgba(65, 105, 225, 0.1);
            padding: 20px;
            border-radius: 15px;
            border: 2px solid #4169E1;
            margin: 20px 0;
        }
        
        .benutzer-stats h4 {
            color: #6495ED;
            font-size: 20px;
            margin-bottom: 15px;
            text-align: center;
        }
        
        .stats-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
        }
        
        .stat-box {
            background: rgba(65, 105, 225, 0.2);
            padding: 15px;
            border-radius: 10px;
            text-align: center;
            color: #87CEEB;
            font-weight: bold;
            border: 1px solid #4169E1;
        }
        
        /* Einstellungen Modal */
        .erd-einstellungen-modal {
            display: none;
            position: fixed;
            z-index: 2100;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.95);
        }
        
        .erd-einstellungen-content {
            position: relative;
            margin: 3% auto;
            width: 90%;
            max-width: 700px;
            max-height: 85vh;
            background: linear-gradient(135deg, #1a1a1a, #2a2a2a);
            padding: 40px;
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.5);
            text-align: center;
            overflow-y: auto;
            scrollbar-width: thin;
            scrollbar-color: #8B4513 #2a2a2a;
        }
        
        .erd-einstellungen-content::-webkit-scrollbar {
            width: 8px;
        }
        
        .erd-einstellungen-content::-webkit-scrollbar-track {
            background: #2a2a2a;
            border-radius: 4px;
        }
        
        .erd-einstellungen-content::-webkit-scrollbar-thumb {
            background: #8B4513;
            border-radius: 4px;
        }
        
        .erd-einstellungen-content::-webkit-scrollbar-thumb:hover {
            background: #A0522D;
        }
        
        .einstellungen-title {
            color: #DEB887;
            font-size: 32px;
            margin-bottom: 30px;
        }
        
        .einstellungen-gruppe {
            margin: 30px 0;
            text-align: left;
        }
        
        .einstellungen-label {
            color: #CD853F;
            font-size: 18px;
            font-weight: bold;
            display: block;
            margin-bottom: 10px;
        }
        
        .einstellungen-input {
            background: rgba(222, 184, 135, 0.1);
            border: 2px solid #8B4513;
            border-radius: 10px;
            padding: 15px;
            font-size: 18px;
            color: #DEB887;
            width: 100%;
            margin-bottom: 10px;
        }
        
        .einstellungen-beschreibung {
            color: #999;
            font-size: 14px;
            font-style: italic;
        }
        
        .highscore-container {
            margin: 30px 0;
            text-align: left;
        }
        
        .highscore-title {
            color: #FFD700;
            font-size: 24px;
            margin-bottom: 20px;
            text-align: center;
        }
        
        .highscore-eintrag {
            display: grid;
            grid-template-columns: 50px 90px 80px 100px 1fr;
            gap: 15px;
            background: rgba(139, 69, 19, 0.2);
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 10px;
            align-items: center;
            border: 1px solid #8B4513;
        }
        
        .rang {
            color: #FFD700;
            font-weight: bold;
            font-size: 18px;
        }
        
        .punkte {
            color: #32CD32;
            font-weight: bold;
        }
        
        .zeit {
            color: #87CEEB;
            font-weight: bold;
        }
        
        .geschwindigkeit {
            color: #FF6B6B;
            font-weight: bold;
        }
        
        .einstellungen {
            color: #DEB887;
            font-size: 12px;
        }
        
        .spiel-stats {
            position: absolute;
            top: 20px;
            right: 20px;
            display: flex;
            gap: 20px;
            color: #DEB887;
            font-size: 18px;
            font-weight: bold;
        }
        
        .stat-item {
            background: rgba(139, 69, 19, 0.3);
            padding: 10px 15px;
            border-radius: 10px;
            border: 2px solid #8B4513;
        }
        
        .hotkey-hinweise {
            position: absolute;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            color: #888;
            font-size: 14px;
            text-align: center;
        }
        
        .hotkey-hinweise span {
            background: rgba(255,255,255,0.1);
            padding: 5px 10px;
            border-radius: 5px;
            margin: 0 5px;
            border: 1px solid #555;
        }
        
        @media (max-width: 768px) {
            .bild-mit-buttons {
                flex-direction: column;
                gap: 20px;
            }
            
            .dorf-bild {
                max-width: 95%;
                max-height: 300px;
            }
            
            .richtung-button {
                width: 250px;
                margin: 10px 0;
            }
            
            .menu-button {
                width: 90%;
                font-size: 18px;
            }
            
            .header h1 {
                font-size: 24px;
            }
            
            .modal-content {
                margin: 20% auto;
                padding: 30px;
            }
            
            .video-content {
                margin: 2% auto;
                width: 95%;
            }
            
            .video-title {
                font-size: 24px;
            }
            
            .video-button {
                padding: 12px 24px;
                font-size: 14px;
            }
            
            .video-controls {
                flex-direction: column;
                align-items: center;
            }
            
            .spiel-menu-content {
                margin: 10% auto;
                padding: 30px 20px;
            }
            
            .spiel-menu-title {
                font-size: 28px;
            }
            
            .spiel-button {
                font-size: 16px;
                padding: 15px 25px;
            }
            
            .erd-addition-content {
                margin: 5% auto;
                padding: 30px 20px;
            }
            
            .erd-title {
                font-size: 28px;
            }
            
            .brocken-container {
                flex-direction: column;
                gap: 20px;
            }
            
            .brocken {
                width: 100px;
                height: 100px;
                font-size: 36px;
            }
            
            .erd-input {
                width: 150px;
                font-size: 20px;
                margin: 10px 0;
            }
            
            .erd-submit {
                margin-left: 0;
                margin-top: 20px;
                font-size: 16px;
                padding: 12px 20px;
                flex: 1;
                min-width: 140px;
            }
            
            .spiel-stats {
                position: relative;
                top: auto;
                right: auto;
                justify-content: center;
                margin-bottom: 20px;
            }
            
            .score-anzeige {
                position: relative;
                top: auto;
                right: auto;
                margin: 0 auto 20px auto;
                font-size: 18px;
            }
            
            .highscore-eintrag {
                grid-template-columns: 40px 70px 60px 80px 1fr;
                gap: 10px;
                font-size: 14px;
            }
            
            .einstellungen-input {
                font-size: 16px;
            }
            
            .hotkey-hinweise {
                position: relative;
                bottom: auto;
                left: auto;
                transform: none;
                margin-top: 20px;
            }
            
            .spiel-listen-container {
                gap: 20px;
            }
            
            .spiel-eintrag {
                grid-template-columns: 1fr 60px 50px 70px;
                gap: 8px;
                font-size: 12px;
            }
            
            .stats-grid {
                grid-template-columns: 1fr;
                gap: 10px;
            }
            
            .login-content {
                margin: 10% auto;
                padding: 30px 20px;
            }
            
            .video-button {
                font-size: 14px;
                padding: 12px 20px;
            }
            
            .login-button {
                font-size: 16px;
                padding: 12px 20px;
            }
        }
        
        @media (max-width: 480px) {
            body {
                padding: 10px;
            }
            
            .menu {
                padding: 30px 20px;
            }
            
            .dorf-container {
                padding: 20px;
            }
        }
    </style>
</head>
<body>
    <div class="game-container">
        <div class="header">
            <h1>üéÆ NeuroGames - Das Dorf üèòÔ∏è</h1>
            <p>GitHub Pages Edition - Kostenlos und f√ºr immer online!</p>
        </div>
        
        <div class="github-info">
            <strong>üêô Gehostet auf GitHub Pages</strong> | 
            Vollst√§ndig Open Source | 
            <a href="https://github.com" target="_blank">Erstelle deine eigene Version</a>
        </div>
        
        <div id="hauptmenu" class="menu">
            <h2>=== NeuroGames Hauptmen√º ===</h2>
            
            <!-- Login/User Info -->
            <div class="user-info" id="userInfo">
                <div class="current-user">üë§ Angemeldet als: <span id="currentUsername"></span></div>
                <button class="login-button" onclick="abmelden()">üö™ Abmelden</button>
            </div>
            
            <div style="text-align: center; margin: 20px;">
                <button id="loginButton" class="login-button" onclick="zeigeLoginModal()">
                    üë§ Anmelden f√ºr Statistiken
                </button>
            </div>
            
            <button class="menu-button menu-btn-1" onclick="zeigeSpielmenu()">üéÆ Spielen</button>
            <button class="menu-button menu-btn-2" onclick="zeigeDorf()">üèòÔ∏è Dorf besuchen</button>
            <button class="menu-button menu-btn-magisch" onclick="zeigeMagischeKarte()">üó∫Ô∏è Magische Karte</button>
            <button class="menu-button menu-btn-3" onclick="zeigeNachricht('Einstellungen', '‚öôÔ∏è Einstellungen werden geladen...\n\nVerf√ºgbare Optionen:\n‚Ä¢ Grafik-Qualit√§t\n‚Ä¢ Sound-Einstellungen\n‚Ä¢ Steuerung anpassen')">‚öôÔ∏è Einstellungen</button>
            <button class="menu-button menu-btn-4" onclick="zeigeVideo()">üé¨ Intro abspielen</button>
            <button class="menu-button menu-btn-5" onclick="spielBeenden()">üö™ Beenden</button>
        </div>
        
        <div id="dorf" class="dorf-container">
            <h1 class="dorf-title">üèòÔ∏è Das mystische Dorf üèòÔ∏è</h1>
            
            <div class="bild-mit-buttons">
                <button class="richtung-button links-button" onclick="klickLinks()">
                    ‚óÄ Links
                </button>
                
                <img src="das dorf.jpg" alt="Das mystische Dorf" class="dorf-bild" onerror="bildFehler()">
                
                <button class="richtung-button rechts-button" onclick="klickRechts()">
                    Rechts ‚ñ∂
                </button>
            </div>
            
            <div class="info-text">
                üåü W√§hlen Sie Ihren Pfad und erleben Sie ein Abenteuer! üåü
            </div>
            
            <button class="zurueck-button" onclick="zeigeHauptmenu()">
                ‚Üê Zur√ºck zum Hauptmen√º
            </button>
        </div>
        
        <div class="footer">
            Erstellt mit ‚ù§Ô∏è von NeuroGames | 
            <a href="https://github.com" target="_blank">GitHub Pages</a> | 
            Open Source & Kostenlos
        </div>
    </div>
    
    <div id="modal" class="modal">
        <div class="modal-content">
            <div id="modal-title" class="modal-title"></div>
            <div id="modal-text" class="modal-text"></div>
            <button class="modal-button" onclick="schliesseModal()">‚Ü©Ô∏è Zur√ºck</button>
            <div style="text-align: center; margin-top: 15px; color: #888; font-size: 14px;">
                <strong>Hotkey:</strong> <span style="background: rgba(255,255,255,0.1); padding: 2px 6px; border-radius: 3px;">ESC</span> Zur√ºck
            </div>
        </div>
    </div>

    <script>
        // GitHub Pages optimiertes JavaScript
        
        function zeigeHauptmenu() {
            document.getElementById('dorf').style.display = 'none';
            document.getElementById('hauptmenu').style.display = 'block';
            console.log('üè† Zur√ºck zum Hauptmen√º (GitHub Pages)');
            document.title = 'NeuroGames - Das Dorf | GitHub Pages';
        }
        
        function zeigeSpielmenu() {
            // Spiel-Men√º Modal anzeigen
            const spielMenuModal = document.getElementById('spielMenuModal');
            spielMenuModal.style.display = 'block';
        }
        
        function zeigeDorf() {
            document.getElementById('hauptmenu').style.display = 'none';
            document.getElementById('dorf').style.display = 'block';
            console.log('üèòÔ∏è Das mystische Dorf wird erkundet (GitHub Pages)');
            document.title = 'NeuroGames - Im mystischen Dorf | GitHub Pages';
        }
        
        function klickLinks() {
            zeigeNachricht(
                'üèÉ‚Äç‚ôÇÔ∏è Der linke Pfad',
                'üåü Sie w√§hlen den linken Pfad!\n\nüîÆ Ihre Entdeckungen:\n‚Ä¢ Ein schimmerndes Portal √∂ffnet sich ‚ú®\n‚Ä¢ Alte Runen leuchten auf dem Pfad üìú\n‚Ä¢ Magische Kristalle schweben in der Luft üíé\n‚Ä¢ Eine geheimnisvolle Stimme fl√ºstert Ihren Namen üëª\n\n‚ö° Die Magie des Dorfes erwacht!\n\nüåç Andere Spieler auf GitHub Pages haben diesen Weg gew√§hlt!'
            );
            console.log('üéÆ GitHub Pages Spieler w√§hlte den LINKEN Pfad - Magie entfesselt!');
        }
        
        function klickRechts() {
            zeigeNachricht(
                'üèÉ‚Äç‚ôÄÔ∏è Der rechte Pfad', 
                'üè™ Sie w√§hlen den rechten Pfad!\n\nüé≠ Ihre Begegnungen:\n‚Ä¢ Ein lebendiger Marktplatz voller H√§ndler üõí\n‚Ä¢ Freundliche Dorfbewohner gr√º√üen Sie herzlich üë•\n‚Ä¢ Ein alter H√§ndler bietet seltene Sch√§tze an üí∞\n‚Ä¢ Eine gem√ºtliche Taverne l√§dt Sie ein üç∫\n‚Ä¢ Reisende erz√§hlen von fernen L√§ndern üó∫Ô∏è\n\nü§ù Die Gemeinschaft hei√üt Sie willkommen!\n\nüåç GitHub Pages verbindet Spieler weltweit!'
            );
            console.log('üéÆ GitHub Pages Spieler w√§hlte den RECHTEN Pfad - Gemeinschaft gefunden!');
        }
        
        function zeigeNachricht(titel, text) {
            document.getElementById('modal-title').textContent = titel;
            document.getElementById('modal-text').textContent = text;
            document.getElementById('modal').style.display = 'block';
        }
        
        function schliesseModal() {
            document.getElementById('modal').style.display = 'none';
        }
        
        function spielBeenden() {
            if (confirm('ü§î M√∂chten Sie das Abenteuer wirklich beenden?\n\nIhre Reise im mystischen Dorf war einzigartig!')) {
                zeigeNachricht('üëã Auf Wiedersehen, Abenteurer!', 'üåü Vielen Dank, dass Sie unser Spiel gespielt haben!\n\nüèòÔ∏è Das mystische Dorf wird auf Sie warten...\n\nüêô Powered by GitHub Pages\nüåç F√ºr immer kostenlos und zug√§nglich\n\n‚ú® Teilen Sie dieses Abenteuer mit Freunden!');
            }
        }
        
        // Magische Karte Funktionen
        function zeigeMagischeKarte() {
            if (!aktuellerBenutzer.isLoggedIn) {
                zeigeNachricht('üîí Anmeldung erforderlich', 'Die magische Karte ist nur f√ºr angemeldete Benutzer verf√ºgbar!\n\nBitte melde dich an, um deine Aktivit√§ten zu sehen.');
                return;
            }
            
            document.getElementById('magischeKarteModal').style.display = 'block';
            ladeKartenDaten();
            ladeTimeline();
            aktualisiereKartenStatistiken();
            
            // Timeline standardm√§√üig ausblenden
            document.getElementById('timelinePanel').style.display = 'none';
        }
        
        function schliesseMagischeKarte() {
            document.getElementById('magischeKarteModal').style.display = 'none';
        }
        
        function ladeKartenDaten() {
            if (!aktuellerBenutzer.isLoggedIn) return;
            
            const accounts = ladeAlleAccounts();
            const account = accounts[aktuellerBenutzer.name];
            
            if (!account || !account.kartenAktivitaeten) return;
            
            const container = document.getElementById('kartenAktivitaeten');
            container.innerHTML = '';
            
            account.kartenAktivitaeten.forEach((aktivitaet, index) => {
                const punkt = document.createElement('div');
                punkt.className = 'aktivitaet-punkt';
                punkt.style.left = aktivitaet.x + 'px';
                punkt.style.top = aktivitaet.y + 'px';
                punkt.style.backgroundColor = aktivitaet.farbe;
                punkt.style.animationDelay = (index * 0.1) + 's';
                
                punkt.addEventListener('mouseenter', (e) => {
                    const tooltip = document.createElement('div');
                    tooltip.className = 'aktivitaet-tooltip';
                    tooltip.innerHTML = `
                        <strong>${aktivitaet.titel}</strong><br>
                        ${aktivitaet.datum} - ${aktivitaet.zeit}<br>
                        <small>${aktivitaet.typ}</small>
                    `;
                    
                    tooltip.style.left = (e.pageX - 25) + 'px';
                    tooltip.style.top = (e.pageY - 60) + 'px';
                    
                    document.body.appendChild(tooltip);
                    
                    punkt.addEventListener('mouseleave', () => {
                        document.body.removeChild(tooltip);
                    }, { once: true });
                });
                
                container.appendChild(punkt);
            });
        }
        
        function ladeTimeline() {
            if (!aktuellerBenutzer.isLoggedIn) return;
            
            const accounts = ladeAlleAccounts();
            const account = accounts[aktuellerBenutzer.name];
            
            if (!account || !account.timelineEvents) return;
            
            const container = document.getElementById('timelineContent');
            container.innerHTML = '';
            
            if (account.timelineEvents.length === 0) {
                container.innerHTML = '<p style="color: #888; text-align: center; padding: 20px;">Noch keine Aktivit√§ten aufgezeichnet</p>';
                return;
            }
            
            account.timelineEvents.forEach(event => {
                const eventDiv = document.createElement('div');
                eventDiv.className = `timeline-event ${event.typ}`;
                
                let emoji = 'üìÖ';
                switch (event.typ) {
                    case 'game_completed': emoji = 'üéÆ'; break;
                    case 'login': emoji = 'üîë'; break;
                    case 'register': emoji = '‚ú®'; break;
                    case 'achievement': emoji = 'üèÜ'; break;
                }
                
                eventDiv.innerHTML = `
                    <div class="event-titel">${emoji} ${event.titel}</div>
                    <div class="event-beschreibung">${event.beschreibung}</div>
                    <div class="event-zeit">${event.datum} - ${event.zeit}</div>
                `;
                
                container.appendChild(eventDiv);
            });
        }
        
        function toggleTimeline() {
            const panel = document.getElementById('timelinePanel');
            if (panel.style.display === 'none') {
                panel.style.display = 'flex';
            } else {
                panel.style.display = 'none';
            }
        }
        
        function filtereTimeline() {
            const filter = document.getElementById('timelineFilter').value;
            const events = document.querySelectorAll('.timeline-event');
            
            events.forEach(event => {
                if (filter === 'all' || event.classList.contains(filter)) {
                    event.style.display = 'block';
                } else {
                    event.style.display = 'none';
                }
            });
        }
        
        function aktualisiereKartenStatistiken() {
            if (!aktuellerBenutzer.isLoggedIn) return;
            
            const accounts = ladeAlleAccounts();
            const account = accounts[aktuellerBenutzer.name];
            
            if (!account) return;
            
            // Gesamtaktivit√§ten
            const gesamtAktivitaeten = (account.kartenAktivitaeten || []).length;
            document.getElementById('gesamtAktivitaeten').textContent = gesamtAktivitaeten;
            
            // Aktive Tage berechnen
            const aktiveTage = new Set();
            if (account.timelineEvents) {
                account.timelineEvents.forEach(event => {
                    aktiveTage.add(event.datum);
                });
            }
            document.getElementById('aktiveTage').textContent = aktiveTage.size;
            
            // Gesamtzeit (in Stunden)
            const gesamtZeit = Math.round((account.statistiken?.gesamtZeit || 0) / 1000 / 60 / 60 * 10) / 10;
            document.getElementById('gesamtZeit').textContent = gesamtZeit + 'h';
            
            // Durchschnittspunkte
            const durchschnitt = account.statistiken?.gesamtSpiele > 0 
                ? Math.round((account.statistiken?.gesamtPunkte || 0) / account.statistiken.gesamtSpiele)
                : 0;
            document.getElementById('durchschnittsPunkte').textContent = durchschnitt;
        }
        
        function exportiereAktivitaeten() {
            if (!aktuellerBenutzer.isLoggedIn) return;
            
            const accounts = ladeAlleAccounts();
            const account = accounts[aktuellerBenutzer.name];
            
            if (!account) return;
            
            const exportData = {
                benutzername: aktuellerBenutzer.name,
                anzeigeName: account.anzeigeName,
                exportZeitpunkt: new Date().toISOString(),
                statistiken: account.statistiken,
                spielVerlauf: account.spielVerlauf,
                timelineEvents: account.timelineEvents,
                kartenAktivitaeten: account.kartenAktivitaeten
            };
            
            const blob = new Blob([JSON.stringify(exportData, null, 2)], { type: 'application/json' });
            const url = URL.createObjectURL(blob);
            
            const a = document.createElement('a');
            a.href = url;
            a.download = `neurogames_${aktuellerBenutzer.name}_${new Date().toISOString().split('T')[0]}.json`;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
            
            fuegeTimelineEventHinzu('export', 'Daten exportiert', 'Aktivit√§tsdaten wurden erfolgreich exportiert');
        }
        
        function bildFehler() {
            console.log('‚ö†Ô∏è Bild konnte nicht geladen werden (GitHub Pages)');
            const bildElement = document.querySelector('.dorf-bild');
            bildElement.style.display = 'none';
            
            const container = document.querySelector('.bild-mit-buttons');
            const ersatzText = document.createElement('div');
            ersatzText.innerHTML = `
                <div style="padding: 80px; background: linear-gradient(45deg, #ecf0f1, #bdc3c7); border-radius: 20px; color: #2c3e50; font-size: 24px; box-shadow: 0 10px 30px rgba(0,0,0,0.2); animation: pulse 2s infinite;">
                    üèòÔ∏è<br><strong>Das mystische Dorf</strong><br>
                    <small style="font-size: 16px; opacity: 0.8;">GitHub Pages Edition</small><br>
                    <small style="font-size: 14px; opacity: 0.6;">Bild wird geladen...</small>
                </div>
            `;
            container.insertBefore(ersatzText, bildElement);
        }
        
        // Event Listeners
        window.onclick = function(event) {
            const modal = document.getElementById('modal');
            if (event.target === modal) {
                schliesseModal();
            }
        }
        
        document.addEventListener('keydown', function(event) {
            if (event.key === 'Escape') {
                schliesseModal();
            }
            if (event.key === 'ArrowLeft') {
                klickLinks();
            }
            if (event.key === 'ArrowRight') {
                klickRechts();
            }
            if (event.key === 'Enter') {
                zeigeDorf();
            }
        });
        
        // Initialisierung
        window.onload = function() {
            console.log('üåç NeuroGames - Das Dorf (GitHub Pages Edition) geladen!');
            console.log('‚å®Ô∏è Tastatur-Shortcuts: ‚Üê ‚Üí Pfeiltasten, Enter = Dorf, Esc = Schlie√üen');
            console.log('üêô Gehostet auf GitHub Pages - F√ºr immer kostenlos!');
            console.log('üåü Teilen Sie diese URL mit Freunden weltweit!');
            
            // Smooth scrolling
            document.documentElement.style.scrollBehavior = 'smooth';
            
            // Preload image
            const img = new Image();
            img.src = 'das dorf.jpg';
        };
        
        // GitHub Pages spezifische Funktionen
        function teileMitFreunden() {
            const url = window.location.href;
            if (navigator.share) {
                navigator.share({
                    title: 'NeuroGames - Das Dorf',
                    text: 'Spiele dieses coole Browser-Spiel!',
                    url: url
                });
            } else {
                // Fallback: URL in Zwischenablage kopieren
                navigator.clipboard.writeText(url).then(() => {
                    alert('üîó URL wurde in die Zwischenablage kopiert!\nTeile sie mit deinen Freunden!');
                });
            }
        }
        
        // Video Modal Funktionen
        function zeigeVideo() {
            const videoModal = document.getElementById('videoModal');
            const videoElement = document.getElementById('introVideo');
            
            // Modal anzeigen
            videoModal.style.display = 'block';
            
            // Video starten
            videoElement.currentTime = 0;
            videoElement.play();
            
            // ESC-Taste zum Schlie√üen
            document.addEventListener('keydown', function(e) {
                if (e.key === 'Escape') {
                    schliesseVideo();
                }
            });
        }
        
        function schliesseVideo() {
            const videoModal = document.getElementById('videoModal');
            const videoElement = document.getElementById('introVideo');
            
            // Video pausieren
            videoElement.pause();
            
            // Modal verstecken
            videoModal.style.display = 'none';
        }
        
        function toggleFullscreen() {
            const videoElement = document.getElementById('introVideo');
            
            if (videoElement.requestFullscreen) {
                videoElement.requestFullscreen();
            } else if (videoElement.webkitRequestFullscreen) {
                videoElement.webkitRequestFullscreen();
            } else if (videoElement.msRequestFullscreen) {
                videoElement.msRequestFullscreen();
            }
        }
        
        // Spiel-Men√º Funktionen
        function schliesseSpielmenu() {
            document.getElementById('spielMenuModal').style.display = 'none';
            // Zur√ºck zum Hauptmen√º
            zeigeHauptmenu();
        }
        
        function geheZumDorfVonSpielmenu() {
            document.getElementById('spielMenuModal').style.display = 'none';
            zeigeDorf();
        }
        
        function zurueckZumSpielmenueVonEinstellungen() {
            document.getElementById('erdEinstellungenModal').style.display = 'none';
            document.getElementById('spielMenuModal').style.display = 'block';
        }
        
        function geheZumDorfVonEinstellungen() {
            document.getElementById('erdEinstellungenModal').style.display = 'none';
            zeigeDorf();
        }
        
        // Erd-Addition Spiel Funktionen
        let aktuellerLevel = 1;
        let aktuelleAufgabe = {};
        let spielStats = {
            richtigeAntworten: 0,
            startZeit: null,
            aktuelleZeit: 0,
            mana: 10,
            brockenAnzahl: 2,
            aktuellerScore: 0
        };
        
        let aktuellerBenutzer = {
            name: null,
            isLoggedIn: false
        };
        let spielTimer = null;
        
        function starteErdAddition() {
            schliesseSpielmenu();
            zeigeEinstellungsModal();
        }
        
        function starteNaechstesLevel() {
            // Pr√ºfe Login-Status
            if (!aktuellerBenutzer.isLoggedIn) {
                zeigeLoginModal();
                return;
            }
            
            // Setze erweiterte Einstellungen f√ºr n√§chstes Level
            document.getElementById('manaInput').value = 25; // H√∂here Schwierigkeit
            document.getElementById('brockenAnzahlInput').value = 4; // Mehr Brocken
            
            // Starte direkt das Spiel mit erweiterten Einstellungen
            schliesseSpielmenu();
            
            spielStats.mana = 25;
            spielStats.brockenAnzahl = 4;
            
            zeigeNachricht('üöÄ N√§chstes Level!', 
                'üéØ Erweiterte Herausforderung gestartet!\n\n' +
                '‚ö° Mana: 25 (erweiterte Schwierigkeit)\n' +
                'ü™® Brocken: 4 pro Aufgabe\n\n' +
                'üèÜ Viel Erfolg beim n√§chsten Level!', 
                function() {
                    document.getElementById('erdEinstellungenModal').style.display = 'none';
                    starteSpiel();
                }
            );
        }
        
        function zeigeEinstellungsModal() {
            // Pr√ºfe Login-Status
            if (!aktuellerBenutzer.isLoggedIn) {
                zeigeLoginModal();
                return;
            }
            
            document.getElementById('erdEinstellungenModal').style.display = 'block';
            ladeAlleSpielStatistiken();
        }
        
        function starteSpielMitEinstellungen() {
            const mana = parseInt(document.getElementById('manaInput').value) || 10;
            const brockenAnzahl = parseInt(document.getElementById('brockenAnzahlInput').value) || 2;
            
            spielStats.mana = mana;
            spielStats.brockenAnzahl = brockenAnzahl;
            spielStats.richtigeAntworten = 0;
            spielStats.aktuellerScore = 0;
            spielStats.startZeit = Date.now();
            spielStats.aktuelleZeit = 0;
            
            document.getElementById('erdEinstellungenModal').style.display = 'none';
            document.getElementById('erdAdditionModal').style.display = 'block';
            
            // Timeline-Event hinzuf√ºgen
            fuegeTimelineEventHinzu('game_started', 'Spiel gestartet', 
                `Erd-Addition begonnen mit Mana: ${mana}, Brocken: ${brockenAnzahl}`, 
                { mana, brockenAnzahl });
            
            // Timer starten
            spielTimer = setInterval(aktualisiereTimer, 100);
            
            starteLevel(1);
        }
        
        function aktualisiereTimer() {
            if (spielStats.startZeit) {
                spielStats.aktuelleZeit = Date.now() - spielStats.startZeit;
                const sekunden = (spielStats.aktuelleZeit / 1000).toFixed(1);
                document.getElementById('timerAnzeige').textContent = `‚è±Ô∏è ${sekunden}s`;
                
                // Score berechnen und aktualisieren
                berechneUndZeigeScore();
            }
        }
        
        function berechneUndZeigeScore() {
            if (spielStats.richtigeAntworten > 0 && spielStats.aktuelleZeit > 0) {
                // Formel: (Mana √ó Brocken √ó RichtigeAntworten¬≤) / Zeit / 100
                const zeitInSekunden = spielStats.aktuelleZeit / 1000;
                const rawScore = (spielStats.mana * spielStats.brockenAnzahl * Math.pow(spielStats.richtigeAntworten, 2)) / zeitInSekunden / 100;
                spielStats.aktuellerScore = Math.round(rawScore);
                
                document.getElementById('scoreAnzeige').textContent = `üèÜ ${spielStats.aktuellerScore} Punkte`;
            } else {
                document.getElementById('scoreAnzeige').textContent = `üèÜ 0 Punkte`;
            }
        }
        
        function starteLevel(level) {
            aktuellerLevel = level;
            const beschreibung = spielStats.brockenAnzahl === 2 ? 
                'Zwei Brocken werden zu einem gro√üen Brocken' :
                `${spielStats.brockenAnzahl} Brocken werden zu einem gro√üen Brocken`;
            
            document.getElementById('erdLevel').textContent = `Level ${level}: ${beschreibung}`;
            
            // Zuf√§llige Zahlen generieren basierend auf Mana
            const zahlen = [];
            let summe = 0;
            
            for (let i = 0; i < spielStats.brockenAnzahl; i++) {
                const zahl = Math.floor(Math.random() * spielStats.mana) + 1;
                zahlen.push(zahl);
                summe += zahl;
            }
            
            aktuelleAufgabe = { zahlen: zahlen, antwort: summe };
            
            // Brocken-Container aktualisieren
            aktualisiereSpielAnzeige();
            
            // Eingabefeld leeren und Ergebnis zur√ºcksetzen
            document.getElementById('erdAntwort').value = '';
            document.getElementById('erdErgebnis').innerHTML = '';
            document.getElementById('erdErgebnis').className = 'erd-result';
            
            // Focus auf Eingabe setzen
            setTimeout(() => document.getElementById('erdAntwort').focus(), 100);
        }
        
        function aktualisiereSpielAnzeige() {
            const container = document.getElementById('brockenContainer');
            container.innerHTML = '';
            
            // Brocken hinzuf√ºgen
            aktuelleAufgabe.zahlen.forEach((zahl, index) => {
                const brocken = document.createElement('div');
                brocken.className = 'brocken';
                brocken.textContent = zahl;
                container.appendChild(brocken);
                
                // Plus-Zeichen zwischen Brocken (au√üer nach dem letzten)
                if (index < aktuelleAufgabe.zahlen.length - 1) {
                    const plus = document.createElement('div');
                    plus.className = 'plus-zeichen';
                    plus.textContent = '+';
                    container.appendChild(plus);
                }
            });
            
            // Gleichheitszeichen und Fragezeichen
            const equals = document.createElement('div');
            equals.className = 'plus-zeichen';
            equals.textContent = '=';
            container.appendChild(equals);
            
            const question = document.createElement('div');
            question.className = 'plus-zeichen';
            question.textContent = '?';
            container.appendChild(question);
            
            // Stats aktualisieren
            document.getElementById('counterAnzeige').textContent = `‚úÖ ${spielStats.richtigeAntworten}`;
            berechneUndZeigeScore();
        }
        
        function pruefeErdAntwort() {
            const eingabe = parseInt(document.getElementById('erdAntwort').value);
            const ergebnisDiv = document.getElementById('erdErgebnis');
            
            if (isNaN(eingabe)) {
                ergebnisDiv.innerHTML = '‚ùå Bitte geben Sie eine g√ºltige Zahl ein!';
                ergebnisDiv.className = 'erd-result erd-error';
                return;
            }
            
            const zeitpunkt = Date.now();
            const aufgabenString = aktuelleAufgabe.zahlen.join(' + ');
            
            if (eingabe === aktuelleAufgabe.antwort) {
                spielStats.richtigeAntworten++;
                
                // SOFORTIGE Animation der Brocken
                const brocken = document.querySelectorAll('.brocken');
                brocken.forEach(b => b.classList.add('brocken-success'));
                
                ergebnisDiv.innerHTML = `
                    ‚úÖ Richtig! ${aufgabenString} = ${aktuelleAufgabe.antwort}
                    <br>üéâ Die Brocken wurden erfolgreich verbunden!
                `;
                ergebnisDiv.className = 'erd-result erd-success';
                
                // Log-Eintrag f√ºr richtige Antwort
                loggeSpielEreignis({
                    zeitpunkt: zeitpunkt,
                    aufgabe: aufgabenString,
                    antwort: eingabe,
                    korrekt: true,
                    spielZeit: spielStats.aktuelleZeit,
                    counter: spielStats.richtigeAntworten,
                    score: spielStats.aktuellerScore
                });
                
                // Direkt nach Animation (1 Sekunde) zur n√§chsten Aufgabe
                setTimeout(() => {
                    naechsteAufgabe();
                }, 1000);
                
            } else {
                ergebnisDiv.innerHTML = `
                    ‚ùå Nicht ganz richtig. Die richtige Antwort ist ${aktuelleAufgabe.antwort}
                    <br>üí° Tipp: ${aufgabenString} = ${aktuelleAufgabe.antwort}
                `;
                ergebnisDiv.className = 'erd-result erd-error';
                
                // Log-Eintrag f√ºr falsche Antwort
                loggeSpielEreignis({
                    zeitpunkt: zeitpunkt,
                    aufgabe: aufgabenString,
                    antwort: eingabe,
                    korrekt: false,
                    richtigeAntwort: aktuelleAufgabe.antwort,
                    spielZeit: spielStats.aktuelleZeit,
                    counter: spielStats.richtigeAntworten,
                    score: spielStats.aktuellerScore
                });
            }
        }
        
        function naechsteAufgabe() {
            starteLevel(aktuellerLevel + 1);
        }
        
        function schliesseErdAddition() {
            // Timer stoppen
            if (spielTimer) {
                clearInterval(spielTimer);
                spielTimer = null;
            }
            
            // Spiel-Session beenden und Ergebnis speichern
            if (spielStats.richtigeAntworten > 0) {
                speichereSpielErgebnis();
            }
            
            document.getElementById('erdAdditionModal').style.display = 'none';
            // Zur√ºck zum Hauptmen√º
            zeigeHauptmenu();
        }
        
        function zurueckZumSpielmenu() {
            // Timer stoppen
            if (spielTimer) {
                clearInterval(spielTimer);
                spielTimer = null;
            }
            
            // Spiel-Session beenden und Ergebnis speichern
            if (spielStats.richtigeAntworten > 0) {
                speichereSpielErgebnis();
            }
            
            document.getElementById('erdAdditionModal').style.display = 'none';
            // Bleibe im Spiel-Men√º - das ist der gew√ºnschte neue Workflow
            document.getElementById('spielMenuModal').style.display = 'block';
        }
        
        function geheZumDorf() {
            // Timer stoppen
            if (spielTimer) {
                clearInterval(spielTimer);
                spielTimer = null;
            }
            
            // Spiel-Session beenden und Ergebnis speichern
            if (spielStats.richtigeAntworten > 0) {
                speichereSpielErgebnis();
            }
            
            document.getElementById('erdAdditionModal').style.display = 'none';
            // Gehe direkt zum Dorf (Bild-Seite)
            zeigeDorf();
        }
        
        function schliesseEinstellungen() {
            document.getElementById('erdEinstellungenModal').style.display = 'none';
            // Zur√ºck zum Hauptmen√º
            zeigeHauptmenu();
        }
        
        // Logging-System
        function loggeSpielEreignis(ereignis) {
            const logs = JSON.parse(localStorage.getItem('erdAdditionLogs') || '[]');
            logs.push({
                ...ereignis,
                session: Date.now(),
                mana: spielStats.mana,
                brockenAnzahl: spielStats.brockenAnzahl
            });
            
            // Nur die letzten 1000 Eintr√§ge behalten
            if (logs.length > 1000) {
                logs.splice(0, logs.length - 1000);
            }
            
            localStorage.setItem('erdAdditionLogs', JSON.stringify(logs));
        }
        
        // Timeline und Aktivit√§ts-Management
        function fuegeTimelineEventHinzu(typ, titel, beschreibung, extraData = {}) {
            if (!aktuellerBenutzer.isLoggedIn) return;
            
            const accounts = ladeAlleAccounts();
            const account = accounts[aktuellerBenutzer.name];
            
            if (!account) return;
            
            const event = {
                id: Date.now() + Math.random(),
                typ: typ,
                titel: titel,
                beschreibung: beschreibung,
                timestamp: new Date().toISOString(),
                datum: new Date().toLocaleDateString('de-DE'),
                zeit: new Date().toLocaleTimeString('de-DE'),
                extraData: extraData
            };
            
            if (!account.timelineEvents) account.timelineEvents = [];
            account.timelineEvents.unshift(event); // Neueste zuerst
            
            // Nur die letzten 50 Events behalten
            if (account.timelineEvents.length > 50) {
                account.timelineEvents = account.timelineEvents.slice(0, 50);
            }
            
            speichereAccount(aktuellerBenutzer.name, account);
        }
        
        function fuegeKartenAktivitaetHinzu(x, y, typ, titel, farbe = '#4169E1') {
            if (!aktuellerBenutzer.isLoggedIn) return;
            
            const accounts = ladeAlleAccounts();
            const account = accounts[aktuellerBenutzer.name];
            
            if (!account) return;
            
            const aktivitaet = {
                id: Date.now() + Math.random(),
                x: x,
                y: y,
                typ: typ,
                titel: titel,
                farbe: farbe,
                timestamp: new Date().toISOString(),
                datum: new Date().toLocaleDateString('de-DE'),
                zeit: new Date().toLocaleTimeString('de-DE')
            };
            
            if (!account.kartenAktivitaeten) account.kartenAktivitaeten = [];
            account.kartenAktivitaeten.unshift(aktivitaet);
            
            // Nur die letzten 100 Aktivit√§ten behalten
            if (account.kartenAktivitaeten.length > 100) {
                account.kartenAktivitaeten = account.kartenAktivitaeten.slice(0, 100);
            }
            
            speichereAccount(aktuellerBenutzer.name, account);
        }
        
        function speichereSpielErgebnis() {
            if (!aktuellerBenutzer.isLoggedIn) return;
            
            const neuesSpiel = {
                id: Date.now() + Math.random(),
                benutzer: aktuellerBenutzer.name,
                datum: new Date().toLocaleDateString('de-DE'),
                zeit: new Date().toLocaleTimeString('de-DE'),
                timestamp: Date.now(),
                richtigeAntworten: spielStats.richtigeAntworten,
                spielZeit: spielStats.aktuelleZeit,
                score: spielStats.aktuellerScore,
                mana: spielStats.mana,
                brockenAnzahl: spielStats.brockenAnzahl,
                geschwindigkeit: (spielStats.richtigeAntworten / (spielStats.aktuelleZeit / 1000)).toFixed(2)
            };
            
            // Zu beiden Listen hinzuf√ºgen
            speichereInLetzteSpiele(neuesSpiel);
            speichereInBesteSpiele(neuesSpiel);
            aktualisiereBenutzerStats(neuesSpiel);
            
            // Account-Daten aktualisieren
            const accounts = ladeAlleAccounts();
            const account = accounts[aktuellerBenutzer.name];
            
            if (account) {
                // Spiel zu Verlauf hinzuf√ºgen
                if (!account.spielVerlauf) account.spielVerlauf = [];
                account.spielVerlauf.unshift(neuesSpiel);
                
                // Nur die letzten 20 Spiele behalten
                if (account.spielVerlauf.length > 20) {
                    account.spielVerlauf = account.spielVerlauf.slice(0, 20);
                }
                
                // Statistiken aktualisieren
                if (!account.statistiken) account.statistiken = {};
                account.statistiken.gesamtSpiele = (account.statistiken.gesamtSpiele || 0) + 1;
                account.statistiken.gesamtPunkte = (account.statistiken.gesamtPunkte || 0) + neuesSpiel.score;
                account.statistiken.gesamtZeit = (account.statistiken.gesamtZeit || 0) + neuesSpiel.spielZeit;
                
                if (!account.statistiken.bestesPunktzahl || neuesSpiel.score > account.statistiken.bestesPunktzahl) {
                    account.statistiken.bestesPunktzahl = neuesSpiel.score;
                }
                
                account.letzteAktivitaet = new Date().toISOString();
                
                speichereAccount(aktuellerBenutzer.name, account);
                
                // Timeline-Event hinzuf√ºgen
                fuegeTimelineEventHinzu('game_completed', 'Spiel beendet', 
                    `Erd-Addition gespielt: ${neuesSpiel.richtigeAntworten} richtige Antworten, ${neuesSpiel.score} Punkte`, 
                    neuesSpiel);
                
                // Karten-Aktivit√§t hinzuf√ºgen (zuf√§llige Position auf der Karte)
                const kartenX = Math.random() * 600 + 100;
                const kartenY = Math.random() * 400 + 100;
                fuegeKartenAktivitaetHinzu(kartenX, kartenY, 'game', 
                    `üéÆ ${neuesSpiel.score} Punkte`, 
                    neuesSpiel.score >= 1000 ? '#FFD700' : '#4169E1');
            }
        }
        
        function speichereInLetzteSpiele(spiel) {
            const benutzerKey = `letzteSpiele_${aktuellerBenutzer.name}`;
            const letzteSpiele = JSON.parse(localStorage.getItem(benutzerKey) || '[]');
            
            letzteSpiele.unshift(spiel); // Am Anfang hinzuf√ºgen
            
            // Nur die letzten 3 behalten
            if (letzteSpiele.length > 3) {
                letzteSpiele.splice(3);
            }
            
            localStorage.setItem(benutzerKey, JSON.stringify(letzteSpiele));
        }
        
        function speichereInBesteSpiele(spiel) {
            const benutzerKey = `besteSpiele_${aktuellerBenutzer.name}`;
            const besteSpiele = JSON.parse(localStorage.getItem(benutzerKey) || '[]');
            
            besteSpiele.push(spiel);
            
            // Nach Score sortieren (h√∂chste zuerst)
            besteSpiele.sort((a, b) => {
                if (b.score !== a.score) {
                    return b.score - a.score;
                }
                if (b.richtigeAntworten !== a.richtigeAntworten) {
                    return b.richtigeAntworten - a.richtigeAntworten;
                }
                return a.spielZeit - b.spielZeit;
            });
            
            // Nur Top 5 behalten
            if (besteSpiele.length > 5) {
                besteSpiele.splice(5);
            }
            
            localStorage.setItem(benutzerKey, JSON.stringify(besteSpiele));
        }
        
        function aktualisiereBenutzerStats(spiel) {
            const statsKey = `benutzerStats_${aktuellerBenutzer.name}`;
            const stats = JSON.parse(localStorage.getItem(statsKey) || '{}');
            
            stats.gesamtSpiele = (stats.gesamtSpiele || 0) + 1;
            stats.gesamtScore = (stats.gesamtScore || 0) + spiel.score;
            stats.gesamtRichtigeAntworten = (stats.gesamtRichtigeAntworten || 0) + spiel.richtigeAntworten;
            stats.gesamtSpielzeit = (stats.gesamtSpielzeit || 0) + spiel.spielZeit;
            stats.bestScore = Math.max(stats.bestScore || 0, spiel.score);
            stats.durchschnittScore = Math.round(stats.gesamtScore / stats.gesamtSpiele);
            
            localStorage.setItem(statsKey, JSON.stringify(stats));
        }
        
        function ladeAlleSpielStatistiken() {
            if (!aktuellerBenutzer.isLoggedIn) return;
            
            ladeLetzteSpiele();
            ladeBesteSpiele();
            ladeBenutzerStats();
        }
        
        function ladeLetzteSpiele() {
            const benutzerKey = `letzteSpiele_${aktuellerBenutzer.name}`;
            const letzteSpiele = JSON.parse(localStorage.getItem(benutzerKey) || '[]');
            const container = document.getElementById('letzteSpieleList');
            
            if (letzteSpiele.length === 0) {
                container.innerHTML = '<div style="color: #888; font-style: italic;">Noch keine Spiele gespielt</div>';
                return;
            }
            
            container.innerHTML = letzteSpiele.map((spiel, index) => `
                <div class="spiel-eintrag">
                    <span class="spiel-datum">${spiel.datum} ${spiel.zeit}</span>
                    <span class="spiel-score">üèÜ ${spiel.score}</span>
                    <span class="spiel-antworten">‚úÖ ${spiel.richtigeAntworten}</span>
                    <span class="spiel-zeit">‚è±Ô∏è ${(spiel.spielZeit / 1000).toFixed(1)}s</span>
                    <span class="spiel-settings">üåç${spiel.mana} ü™®${spiel.brockenAnzahl}</span>
                </div>
            `).join('');
        }
        
        function ladeBesteSpiele() {
            const benutzerKey = `besteSpiele_${aktuellerBenutzer.name}`;
            const besteSpiele = JSON.parse(localStorage.getItem(benutzerKey) || '[]');
            const container = document.getElementById('besteSpieleList');
            
            if (besteSpiele.length === 0) {
                container.innerHTML = '<div style="color: #888; font-style: italic;">Noch keine Bestleistungen</div>';
                return;
            }
            
            container.innerHTML = besteSpiele.map((spiel, index) => `
                <div class="highscore-eintrag">
                    <span class="rang">#${index + 1}</span>
                    <span class="punkte">üèÜ ${spiel.score}</span>
                    <span class="punkte">‚úÖ ${spiel.richtigeAntworten}</span>
                    <span class="zeit">‚è±Ô∏è ${(spiel.spielZeit / 1000).toFixed(1)}s</span>
                    <span class="einstellungen">${spiel.datum}</span>
                </div>
            `).join('');
        }
        
        function ladeBenutzerStats() {
            const statsKey = `benutzerStats_${aktuellerBenutzer.name}`;
            const stats = JSON.parse(localStorage.getItem(statsKey) || '{}');
            const container = document.getElementById('benutzerStatsContainer');
            
            const gesamtSpiele = stats.gesamtSpiele || 0;
            const durchschnittScore = stats.durchschnittScore || 0;
            const bestScore = stats.bestScore || 0;
            const gesamtSpielzeitSek = Math.round((stats.gesamtSpielzeit || 0) / 1000);
            
            container.innerHTML = `
                <div class="benutzer-stats">
                    <h4>üìä ${aktuellerBenutzer.name}'s Statistiken</h4>
                    <div class="stats-grid">
                        <div class="stat-box">üéÆ ${gesamtSpiele} Spiele</div>
                        <div class="stat-box">üèÜ ${bestScore} Rekord</div>
                        <div class="stat-box">üìà ‚åÄ${durchschnittScore} √ò-Score</div>
                        <div class="stat-box">‚è±Ô∏è ${gesamtSpielzeitSek}s gespielt</div>
                    </div>
                </div>
            `;
        }
        
        // Universelles ESC-Hotkey-System - immer einen Schritt zur√ºck
        document.addEventListener('keydown', function(e) {
            if (e.key === 'Escape') {
                e.preventDefault();
                // Pr√ºfe welches Modal aktiv ist und f√ºhre entsprechende Zur√ºck-Aktion aus
                if (document.getElementById('magischeKarteModal').style.display === 'block') {
                    schliesseMagischeKarte();
                } else if (document.getElementById('erdAdditionModal').style.display === 'block') {
                    zurueckZumSpielmenu();
                } else if (document.getElementById('erdEinstellungenModal').style.display === 'block') {
                    zurueckZumSpielmenueVonEinstellungen();
                } else if (document.getElementById('spielMenuModal').style.display === 'block') {
                    schliesseSpielmenu();
                } else if (document.getElementById('loginModal').style.display === 'block') {
                    schliesseLoginModal();
                } else if (document.getElementById('videoModal').style.display === 'block') {
                    schliesseVideo();
                } else if (document.querySelector('.modal').style.display === 'block') {
                    schliesseModal();
                }
                return;
            }
            
            // Spezifische Hotkeys nur wenn Erd-Addition Spiel aktiv ist
            if (document.getElementById('erdAdditionModal').style.display === 'block') {
                switch(e.key) {
                    case 'f': // N√§chste Aufgabe (F-Taste)
                    case 'F':
                        e.preventDefault();
                        naechsteAufgabe();
                        break;
                    case 'Enter':
                        e.preventDefault();
                        pruefeErdAntwort();
                        break;
                }
            } else if (document.getElementById('erdEinstellungenModal').style.display === 'block') {
                switch(e.key) {
                    case 'Enter':
                        e.preventDefault();
                        starteSpielMitEinstellungen();
                        break;
                }
            } else if (document.getElementById('magischeKarteModal').style.display === 'block') {
                switch(e.key) {
                    case 't':
                    case 'T':
                        e.preventDefault();
                        toggleTimeline();
                        break;
                    case 'e':
                    case 'E':
                        e.preventDefault();
                        exportiereAktivitaeten();
                        break;
                }
            } else if (document.getElementById('loginModal').style.display === 'block') {
                switch(e.key) {
                    case 'Enter':
                        e.preventDefault();
                        anmelden();
                        break;
                }
            }
        });
        
        // Account-System Funktionen
        function zeigeLoginModal() {
            document.getElementById('loginModal').style.display = 'block';
            
            // Standardm√§√üig Login-Tab anzeigen
            zeigLoginTab();
            
            document.getElementById('loginUsername').focus();
        }
        
        function schliesseLoginModal() {
            document.getElementById('loginModal').style.display = 'none';
        }
        
        // Erweiterte Account-Verwaltung
        function ladeAlleAccounts() {
            const accounts = JSON.parse(localStorage.getItem('neuroGamesAccounts') || '{}');
            return accounts;
        }
        
        function speichereAccount(username, accountData) {
            const accounts = ladeAlleAccounts();
            accounts[username] = accountData;
            localStorage.setItem('neuroGamesAccounts', JSON.stringify(accounts));
        }
        
        function zeigLoginTab() {
            document.getElementById('loginTab').classList.add('active');
            document.getElementById('registerTab').classList.remove('active');
            document.getElementById('loginForm').style.display = 'block';
            document.getElementById('registerForm').style.display = 'none';
            
            // Lade bestehende Accounts
            ladeBestehendeAccounts();
        }
        
        function zeigRegisterTab() {
            document.getElementById('registerTab').classList.add('active');
            document.getElementById('loginTab').classList.remove('active');
            document.getElementById('registerForm').style.display = 'block';
            document.getElementById('loginForm').style.display = 'none';
        }
        
        function ladeBestehendeAccounts() {
            const accounts = ladeAlleAccounts();
            const container = document.getElementById('existingAccountsList');
            
            if (Object.keys(accounts).length === 0) {
                container.innerHTML = '<p style="color: #666; font-size: 14px; text-align: center;">Noch keine Accounts vorhanden</p>';
                return;
            }
            
            let html = '<h4 style="color: #87CEEB; margin-bottom: 10px;">Bestehende Accounts:</h4>';
            
            Object.entries(accounts).forEach(([username, data]) => {
                const spieleAnzahl = (data.spielVerlauf || []).length;
                const letzteAktivitaet = data.letzteAktivitaet ? new Date(data.letzteAktivitaet).toLocaleDateString() : 'Nie';
                
                html += `
                    <div class="account-item" onclick="waehleBestehendenAccount('${username}')">
                        <div class="account-name">üë§ ${data.anzeigeName || username}</div>
                        <div class="account-stats">üéÆ ${spieleAnzahl} Spiele ‚Ä¢ üìÖ ${letzteAktivitaet}</div>
                    </div>
                `;
            });
            
            container.innerHTML = html;
        }
        
        function waehleBestehendenAccount(username) {
            document.getElementById('loginUsername').value = username;
        }
        
        function anmeldenBestehend() {
            const username = document.getElementById('loginUsername').value.trim();
            
            if (username.length < 3) {
                alert('Benutzername muss mindestens 3 Zeichen lang sein!');
                return;
            }
            
            const accounts = ladeAlleAccounts();
            
            if (!accounts[username]) {
                alert('Account nicht gefunden! Bitte registriere einen neuen Account.');
                return;
            }
            
            // Anmelden mit bestehendem Account
            aktuellerBenutzer.name = username;
            aktuellerBenutzer.isLoggedIn = true;
            localStorage.setItem('aktuellerBenutzer', JSON.stringify(aktuellerBenutzer));
            
            // Aktualisiere letzte Aktivit√§t
            accounts[username].letzteAktivitaet = new Date().toISOString();
            speichereAccount(username, accounts[username]);
            
            // Timeline-Event hinzuf√ºgen
            fuegeTimelineEventHinzu('login', 'Anmeldung', `${username} hat sich angemeldet`);
            
            schliesseLoginModal();
            zeigeEinstellungsModal();
            aktualisiereLoginAnzeigen();
            
            zeigeNachricht('üéâ Willkommen zur√ºck!', `Erfolgreich als ${accounts[username].anzeigeName || username} angemeldet!`);
        }
        
        function registriereNeuerAccount() {
            const username = document.getElementById('registerUsername').value.trim();
            const displayName = document.getElementById('registerDisplayName').value.trim();
            
            if (username.length < 3) {
                alert('Benutzername muss mindestens 3 Zeichen lang sein!');
                return;
            }
            
            const accounts = ladeAlleAccounts();
            
            if (accounts[username]) {
                alert('Benutzername bereits vergeben! Bitte w√§hle einen anderen.');
                return;
            }
            
            // Erstelle neuen Account
            const neuerAccount = {
                username: username,
                anzeigeName: displayName || username,
                erstelltAm: new Date().toISOString(),
                letzteAktivitaet: new Date().toISOString(),
                spielVerlauf: [],
                timelineEvents: [],
                statistiken: {
                    gesamtSpiele: 0,
                    gesamtPunkte: 0,
                    gesamtZeit: 0,
                    bestesPunktzahl: 0,
                    lieblingsLevel: null
                },
                kartenAktivitaeten: []
            };
            
            speichereAccount(username, neuerAccount);
            
            // Anmelden mit neuem Account
            aktuellerBenutzer.name = username;
            aktuellerBenutzer.isLoggedIn = true;
            localStorage.setItem('aktuellerBenutzer', JSON.stringify(aktuellerBenutzer));
            
            // Timeline-Event hinzuf√ºgen
            fuegeTimelineEventHinzu('register', 'Registrierung', `Neuer Account ${displayName || username} wurde erstellt`);
            
            schliesseLoginModal();
            zeigeEinstellungsModal();
            aktualisiereLoginAnzeigen();
            
            zeigeNachricht('‚ú® Account erstellt!', `Willkommen ${displayName || username}! Dein magischer Account wurde erfolgreich erstellt.`);
        }
        
        // Legacy-Funktion f√ºr R√ºckw√§rtskompatibilit√§t
        function anmelden() {
            anmeldenBestehend();
        }
        
        function abmelden() {
            aktuellerBenutzer.name = null;
            aktuellerBenutzer.isLoggedIn = false;
            localStorage.removeItem('aktuellerBenutzer');
            
            // Aktualisiere UI
            aktualisiereLoginAnzeigen();
            
            // Schlie√üe alle Spiel-Modals
            document.getElementById('erdEinstellungenModal').style.display = 'none';
            document.getElementById('erdAdditionModal').style.display = 'none';
        }
        
        function erstelleBenutzerAccountFallsNoetig(username) {
            const accountKey = `account_${username}`;
            const existierenderAccount = localStorage.getItem(accountKey);
            
            if (!existierenderAccount) {
                const neuerAccount = {
                    username: username,
                    erstelltAm: new Date().toISOString(),
                    letzterLogin: new Date().toISOString()
                };
                localStorage.setItem(accountKey, JSON.stringify(neuerAccount));
            } else {
                // Aktualisiere letzten Login
                const account = JSON.parse(existierenderAccount);
                account.letzterLogin = new Date().toISOString();
                localStorage.setItem(accountKey, JSON.stringify(account));
            }
        }
        
        function aktualisiereLoginAnzeigen() {
            const loginBtn = document.getElementById('loginButton');
            const userInfo = document.getElementById('userInfo');
            
            if (aktuellerBenutzer.isLoggedIn) {
                loginBtn.style.display = 'none';
                userInfo.style.display = 'block';
                document.getElementById('currentUsername').textContent = aktuellerBenutzer.name;
            } else {
                loginBtn.style.display = 'block';
                userInfo.style.display = 'none';
            }
        }
        
        // Beim Laden der Seite pr√ºfen ob Benutzer eingeloggt ist
        document.addEventListener('DOMContentLoaded', function() {
            const gespeicherterBenutzer = localStorage.getItem('aktuellerBenutzer');
            if (gespeicherterBenutzer) {
                aktuellerBenutzer = JSON.parse(gespeicherterBenutzer);
            }
            aktualisiereLoginAnzeigen();
        });
    </script>
    
    <!-- Video Modal -->
    <div id="videoModal" class="video-modal">
        <div class="video-content">
            <h2 class="video-title">üéÆ NeuroGames - Das Dorf Intro</h2>
            <p class="video-description">Willkommen in der Welt von NeuroGames! Tauche ein in das Abenteuer...</p>
            
            <video id="introVideo" class="video-player" controls>
                <source src="1018.mp4" type="video/mp4">
                Ihr Browser unterst√ºtzt das Video-Format nicht.
            </video>
            
            <div class="video-controls">
                <button class="video-button fullscreen" onclick="toggleFullscreen()">
                    üñ•Ô∏è Vollbild
                </button>
                <button class="video-button close" onclick="schliesseVideo()">
                    ‚Ü©Ô∏è Zur√ºck
                </button>
            </div>
            
            <div style="text-align: center; margin-top: 15px; color: #888; font-size: 14px;">
                <strong>Hotkey:</strong> <span style="background: rgba(255,255,255,0.1); padding: 2px 6px; border-radius: 3px;">ESC</span> Zur√ºck
            </div>
        </div>
    </div>
    
    <!-- Spiel-Men√º Modal -->
    <div id="spielMenuModal" class="spiel-menu-modal">
        <div class="spiel-menu-content">
            <h2 class="spiel-menu-title">üéÆ Spiel-Men√º</h2>
            <div class="spiel-buttons">
                <button class="spiel-button erd-addition" onclick="starteErdAddition()">
                    üåç Erd-Addition
                    <br><small>Mathematik-Abenteuer mit Brocken</small>
                </button>
                <button class="spiel-button naechstes-level" onclick="starteNaechstesLevel()">
                    üöÄ N√§chstes Level
                    <br><small>Erweiterte Herausforderungen</small>
                </button>
                <button class="spiel-button" onclick="zeigeNachricht('üéØ Coming Soon', '‚öîÔ∏è Weitere Spiele werden bald verf√ºgbar sein!\n\nüéÆ Geplante Abenteuer:\n‚Ä¢ Wasser-Subtraktion\n‚Ä¢ Feuer-Multiplikation\n‚Ä¢ Luft-Division\n‚Ä¢ Mystische R√§tsel')">
                    üéØ Weitere Abenteuer
                    <br><small>Coming Soon...</small>
                </button>
            </div>
            <div style="display: flex; gap: 15px; justify-content: center; flex-wrap: wrap;">
                <button class="video-button" onclick="schliesseSpielmenu()">‚Ü©Ô∏è Zur√ºck zum Hauptmen√º</button>
                <button class="video-button" onclick="geheZumDorfVonSpielmenu()">üèòÔ∏è Zum Dorf</button>
            </div>
            
            <div class="hotkey-hinweise">
                <strong>Hotkeys:</strong> <span>ESC</span> Zur√ºck zum Hauptmen√º
            </div>
        </div>
    </div>
    
    <!-- Erd-Addition Einstellungen Modal -->
    <div id="erdEinstellungenModal" class="erd-einstellungen-modal">
        <div class="erd-einstellungen-content">
            <h2 class="einstellungen-title">‚öôÔ∏è Erd-Addition Konfiguration</h2>
            
            <div class="einstellungen-gruppe">
                <label class="einstellungen-label" for="manaInput">üîÆ Mana (Schwierigkeitsgrad):</label>
                <input type="number" id="manaInput" class="einstellungen-input" value="10" min="1" max="100" />
                <div class="einstellungen-beschreibung">
                    Bestimmt den Zahlenbereich (1 bis Mana). H√∂here Werte = schwieriger
                </div>
            </div>
            
            <div class="einstellungen-gruppe">
                <label class="einstellungen-label" for="brockenAnzahlInput">ü™® Anzahl der Brocken:</label>
                <input type="number" id="brockenAnzahlInput" class="einstellungen-input" value="2" min="2" max="5" />
                <div class="einstellungen-beschreibung">
                    Wie viele Brocken sollen pro Aufgabe kombiniert werden?
                </div>
            </div>
            
            <div id="benutzerStatsContainer"></div>
            
            <div class="spiel-listen-container">
                <div class="spiel-liste">
                    <h3 class="liste-titel">üìÖ Letzte 3 Spiele</h3>
                    <div id="letzteSpieleList"></div>
                </div>
                
                <div class="spiel-liste">
                    <h3 class="liste-titel">üèÜ Beste 5 Spiele</h3>
                    <div id="besteSpieleList"></div>
                </div>
            </div>
            
            <div style="margin-top: 30px; text-align: center;">
                <button class="erd-submit" onclick="starteSpielMitEinstellungen()">üöÄ Spiel starten</button>
                <button class="video-button" onclick="zurueckZumSpielmenueVonEinstellungen()">‚Ü©Ô∏è Zur√ºck zum Spiel-Men√º</button>
                <button class="video-button" onclick="geheZumDorfVonEinstellungen()">üèòÔ∏è Zum Dorf</button>
                <button class="video-button close" onclick="schliesseEinstellungen()">‚ùå Hauptmen√º</button>
            </div>
            
            <div class="hotkey-hinweise">
                <strong>Hotkeys:</strong> <span>Enter</span> Starten | <span>ESC</span> Zur√ºck zum Spiel-Men√º
            </div>
        </div>
    </div>
    
    <!-- Erd-Addition Spiel Modal -->
    <div id="erdAdditionModal" class="erd-addition-modal">
        <div class="erd-addition-content">
            <div class="spiel-stats">
                <div class="stat-item" id="counterAnzeige">‚úÖ 0</div>
                <div class="stat-item" id="timerAnzeige">‚è±Ô∏è 0.0s</div>
            </div>
            
            <div class="score-anzeige" id="scoreAnzeige">üèÜ 0</div>
            
            <h2 class="erd-title">üåç Erd-Addition</h2>
            <p id="erdLevel" class="erd-level">Level 1: Zwei Brocken werden zu einem gro√üen Brocken</p>
            
            <div id="brockenContainer" class="brocken-container">
                <div class="brocken">5</div>
                <div class="plus-zeichen">+</div>
                <div class="brocken">3</div>
                <div class="plus-zeichen">=</div>
                <div class="plus-zeichen">?</div>
            </div>
            
            <div class="eingabe-container">
                <p style="color: #DEB887; font-size: 18px; margin-bottom: 20px;">
                    ü™® Verbinden Sie die Brocken! Wie gro√ü ist der neue Brocken?
                </p>
                <input type="number" id="erdAntwort" class="erd-input" placeholder="Ihre Antwort..." />
                <div style="display: flex; gap: 15px; justify-content: center; flex-wrap: wrap; margin-top: 20px;">
                    <button class="erd-submit" onclick="pruefeErdAntwort()">‚ú® Verbinden</button>
                    <button class="erd-submit" onclick="naechsteAufgabe()" style="background: linear-gradient(45deg, #4169E1, #6495ED);">‚è≠Ô∏è N√§chste Aufgabe</button>
                </div>
            </div>
            
            <div id="erdErgebnis" class="erd-result"></div>
            
            <div style="margin-top: 30px;">
                <button class="video-button" onclick="zurueckZumSpielmenu()">‚Ü©Ô∏è Zur√ºck zum Spiel-Men√º</button>
                <button class="video-button" onclick="geheZumDorf()">üèòÔ∏è Zum Dorf</button>
                <button class="video-button close" onclick="schliesseErdAddition()">‚ùå Hauptmen√º</button>
            </div>
            
            <div class="hotkey-hinweise">
                <strong>Hotkeys:</strong> <span>Enter</span> Antworten | <span>F</span> N√§chste Aufgabe | <span>ESC</span> Zur√ºck zum Spiel-Men√º
            </div>
        </div>
    </div>
    
    <!-- Login Modal -->
    <div id="loginModal" class="login-modal">
        <div class="login-content">
            <h2 class="login-title">üë§ Account System</h2>
            
            <div id="loginTabContainer" class="login-tabs">
                <button id="loginTab" class="login-tab active" onclick="zeigLoginTab()">üîë Anmelden</button>
                <button id="registerTab" class="login-tab" onclick="zeigRegisterTab()">‚ú® Registrieren</button>
            </div>
            
            <!-- Login Form -->
            <div id="loginForm" class="login-form">
                <p style="color: #888; margin-bottom: 20px;">
                    Melde dich mit einem bestehenden Account an!
                </p>
                
                <input type="text" id="loginUsername" class="login-input" 
                       placeholder="Benutzername eingeben..." maxlength="20" />
                
                <div id="existingAccountsList" class="existing-accounts"></div>
                
                <div>
                    <button class="login-button" onclick="anmeldenBestehend()">üöÄ Anmelden</button>
                    <button class="login-button" onclick="schliesseLoginModal()" 
                            style="background: linear-gradient(45deg, #666, #888);">‚Ü©Ô∏è Zur√ºck</button>
                </div>
            </div>
            
            <!-- Register Form -->
            <div id="registerForm" class="login-form" style="display: none;">
                <p style="color: #888; margin-bottom: 20px;">
                    Erstelle einen neuen magischen Account!
                </p>
                
                <input type="text" id="registerUsername" class="login-input" 
                       placeholder="Neuer Benutzername..." maxlength="20" />
                
                <input type="text" id="registerDisplayName" class="login-input" 
                       placeholder="Anzeigename (optional)..." maxlength="30" />
                
                <div>
                    <button class="login-button" onclick="registriereNeuerAccount()">‚ú® Registrieren</button>
                    <button class="login-button" onclick="schliesseLoginModal()" 
                            style="background: linear-gradient(45deg, #666, #888);">‚Ü©Ô∏è Zur√ºck</button>
                </div>
            </div>
            
            <div style="margin-top: 20px; font-size: 12px; color: #666; line-height: 1.4;">
                üíæ Deine Daten werden lokal in deinem Browser gespeichert<br>
                üîí Keine Passw√∂rter erforderlich - nur Benutzername<br>
                üéÆ Alle Spielaktivit√§ten werden f√ºr die magische Karte aufgezeichnet<br>
                <strong>Hotkey:</strong> <span style="background: rgba(255,255,255,0.1); padding: 2px 6px; border-radius: 3px;">ESC</span> Zur√ºck
            </div>
        </div>
    </div>
    
    <!-- Magische Karte Modal -->
    <div id="magischeKarteModal" class="magische-karte-modal">
        <div class="karte-container">
            <div class="karte-header">
                <h2 class="karte-title">üó∫Ô∏è Magische Aktivit√§tskarte ‚ú®</h2>
                <div class="karte-controls">
                    <button class="karte-button" onclick="toggleTimeline()">üìÖ Timeline</button>
                    <button class="karte-button" onclick="exportiereAktivitaeten()">üíæ Export</button>
                    <button class="karte-button" onclick="schliesseMagischeKarte()">‚ùå Schlie√üen</button>
                </div>
            </div>
            
            <div class="karte-content">
                <!-- Magische Karte -->
                <div class="karte-bereich">
                    <div id="magischeKarte" class="magische-karte">
                        <div class="karte-hintergrund"></div>
                        <div id="kartenAktivitaeten" class="karten-aktivitaeten"></div>
                        
                        <!-- Legende -->
                        <div class="karte-legende">
                            <h4>üé≠ Legende</h4>
                            <div class="legende-item"><span class="legende-farbe" style="background: #4169E1;"></span> Normale Spiele</div>
                            <div class="legende-item"><span class="legende-farbe" style="background: #FFD700;"></span> Hochpunktzahl (1000+)</div>
                            <div class="legende-item"><span class="legende-farbe" style="background: #32CD32;"></span> Neue Rekorde</div>
                            <div class="legende-item"><span class="legende-farbe" style="background: #FF6B35;"></span> Besondere Events</div>
                        </div>
                    </div>
                </div>
                
                <!-- Timeline Panel -->
                <div id="timelinePanel" class="timeline-panel">
                    <div class="timeline-header">
                        <h3>‚è≥ Aktivit√§ts-Timeline</h3>
                        <div class="timeline-filter">
                            <select id="timelineFilter" onchange="filtereTimeline()">
                                <option value="all">Alle Aktivit√§ten</option>
                                <option value="game">Nur Spiele</option>
                                <option value="login">Nur Anmeldungen</option>
                                <option value="achievement">Nur Erfolge</option>
                            </select>
                        </div>
                    </div>
                    
                    <div id="timelineContent" class="timeline-content">
                        <!-- Timeline wird hier dynamisch geladen -->
                    </div>
                </div>
            </div>
            
            <div class="karte-stats">
                <div class="stat-box">
                    <div class="stat-zahl" id="gesamtAktivitaeten">0</div>
                    <div class="stat-label">Aktivit√§ten</div>
                </div>
                <div class="stat-box">
                    <div class="stat-zahl" id="aktiveTage">0</div>
                    <div class="stat-label">Aktive Tage</div>
                </div>
                <div class="stat-box">
                    <div class="stat-zahl" id="gesamtZeit">0h</div>
                    <div class="stat-label">Gesamtzeit</div>
                </div>
                <div class="stat-box">
                    <div class="stat-zahl" id="durchschnittsPunkte">0</div>
                    <div class="stat-label">√ò Punkte</div>
                </div>
            </div>
            
            <div class="hotkey-hinweise">
                <strong>Hotkeys:</strong> 
                <span>T</span> Timeline umschalten | 
                <span>E</span> Exportieren | 
                <span>ESC</span> Schlie√üen
            </div>
        </div>
    </div>

</body>
</html>